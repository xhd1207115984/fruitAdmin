(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a6c8b26"],{"0b45":function(t,e,a){"use strict";a("aa94")},"43e6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-list"},[a("Search",{attrs:{categoryList:t.categoryList},on:{submit:t.searchSubmit}}),a("a-button",{staticClass:"product-app-btn"},[a("router-link",{attrs:{to:{name:"ProductAdd"}}},[t._v("添加商品")])],1),a("products-table",{attrs:{tableData:t.productTableData,page:t.page,categoryList:t.categoryList},on:{change:t.changePage,edit:t.editProduct,remove:t.removeProduct}})],1)},r=[],o=(a("d81d"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),c=a("5530"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-box"},[a("a-form-model",{attrs:{layout:"inline"},on:{submit:t.handleSubmit},nativeOn:{submit:function(t){t.preventDefault()}}},[a("a-form-model-item",{attrs:{label:"检索关键字"}},[a("a-input",{attrs:{placeholder:"请输入关键字"},model:{value:t.searchForm.searchWord,callback:function(e){t.$set(t.searchForm,"searchWord",e)},expression:"searchForm.searchWord"}})],1),a("a-form-model-item",{attrs:{label:"商品类目"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"请选择商品类目",allowClear:""},on:{change:t.handleChange}},t._l(t.categoryList,(function(e){return a("a-select-option",{key:e._id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-model-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 搜索 ")])],1)],1)],1)},s=[],u={data:function(){return{searchForm:{searchWord:"",category:""}}},props:["categoryList"],methods:{handleSubmit:function(){this.$emit("submit",this.searchForm)},handleChange:function(t){this.searchForm.category=t}}},l=u,d=(a("4f1d"),a("2877")),h=Object(d["a"])(l,i,s,!1,null,null,null),m=h.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-table",{attrs:{columns:t.columns,"data-source":t.tableData,pagination:t.page},on:{change:t.changePage},scopedSlots:t._u([{key:"operation",fn:function(e,n){return a("div",{},[a("a-button",{on:{click:function(e){return t.editProduct(n)}}},[t._v("编辑")]),a("a-button",{on:{click:function(e){return t.removeProduct(n)}}},[t._v("删除")])],1)}}])})},f=[],g=[{title:"ID",dataIndex:"id",key:"id"},{title:"标题",dataIndex:"title",key:"title",ellipsis:!0},{title:"描述",dataIndex:"desc",key:"desc",ellipsis:!0},{title:"类目",dataIndex:"categoryName",key:"category",ellipsis:!0},{title:"预售价格",dataIndex:"price",key:"price"},{title:"标签",dataIndex:"tags",key:"tags"},{title:"限制购买数量",dataIndex:"inventory",key:"inventory"},{title:"上架状态",dataIndex:"status",key:"status",customRender:function(t,e){return 1===e.status?"上架":"下架"}},{title:"操作",dataIndex:"operation",key:"operation",width:200,scopedSlots:{customRender:"operation"}}],b={data:function(){return{columns:g}},props:["tableData","page"],methods:{changePage:function(t){this.$emit("change",t)},editProduct:function(t){this.$emit("edit",t)},removeProduct:function(t){this.$emit("remove",t)}}},y=b,v=Object(d["a"])(y,p,f,!1,null,null,null),k=v.exports,w=a("c4c8"),x=a("c405"),D={data:function(){return{tableData:[],searchForm:{},categoryList:[],page:{current:1,pageSize:10,showSizeChanger:!0,total:1},categoryObj:{}}},components:{Search:m,productsTable:k},computed:{productTableData:function(){return this.tableData.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{key:t.id})}))}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(x["a"])().then((function(e){t.categoryList=e.data,e.data.forEach((function(e){t.categoryObj[e.id]=e}))}));case 2:t.getTableData();case 3:case"end":return e.stop()}}),e)})))()},methods:{searchSubmit:function(t){this.searchForm=t,this.getTableData()},getTableData:function(){var t=this;w["a"].list(Object(c["a"])({page:this.page.current,size:this.page.pageSize},this.searchForm)).then((function(e){t.page.total=e.total,t.tableData=e.data.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{categoryName:t.categoryObj[e.category].name})}))}))},changePage:function(t){this.page=t,this.getTableData()},editProduct:function(t){this.$router.push({name:"ProductEdit",params:{id:t.id}})},removeProduct:function(t){var e=this.$createElement,a=this;this.$confirm({title:"确认删除",content:function(){return e("div",{style:"color:red;"},["确认删除:".concat(t.title,"改商品吗?")])},onOk:function(){w["a"].remove({id:t.id}).then((function(t){window.console.log(t),a.getTableData()}))},onCancel:function(){window.console.log("Cancel")},class:"config-box"})}}},O=D,_=(a("0b45"),Object(d["a"])(O,n,r,!1,null,null,null));e["default"]=_.exports},"4f1d":function(t,e,a){"use strict";a("d6aa")},aa94:function(t,e,a){},c405:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("bb36");function r(t){return n["a"].get("/category/all",{params:t})}},c4c8:function(t,e,a){"use strict";var n=a("bb36");e["a"]={list:function(t){return n["a"].get("/products/all",{params:t})},remove:function(t){return n["a"].delete("/products/".concat(t.id))},add:function(t){return n["a"].post("/products/add",t)},detail:function(t){return n["a"].get("/products/".concat(t))},edit:function(t){return n["a"].put("/products/edit",t)}}},d6aa:function(t,e,a){}}]);
//# sourceMappingURL=chunk-9a6c8b26.0e3bf299.js.map